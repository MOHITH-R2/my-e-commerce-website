{% extends "base.html" %}

{% block head %}
    <meta name="description" content="{{ product.description or 'Check out our amazing product!' }}">
    <meta name="keywords" content="{{ product.name }}, {{ product.category or 'General' }}">
    <title>{{ product.name }} - Vivi</title>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "Product",
      "name": "{{ product.name }}",
      "image": ["{{ url_for('static', filename='images/' + (product.image or 'placeholder.jpg'), _external=True) }}"],
      "description": "{{ product.description or 'Check out our amazing product!' }}",
      "sku": "{{ product.id }}",
      "offers": {
        "@type": "Offer",
        "url": "{{ request.url }}",
        "priceCurrency": "INR",
        "price": "{{ product.price }}",
        "availability": "https://schema.org/InStock"
      }
    }
    </script>
{% endblock %}

{% block content %}
<main>
    <section class="product-detail">
        <img src="{{ url_for('static', filename='images/' + (product.image or 'placeholder.jpg')) }}"
             alt="{{ product.name }} image" class="product-img">
        <div class="info">
            <h2>{{ product.name }}</h2>
            <p class="category">Category: {{ product.category or 'General' }}</p>
            <p class="price">Rs.{{ "%.2f"|format(product.price) }}</p>
            <p class="desc">{{ product.description or 'No description available.' }}</p>
            <a href="{{ url_for('add_to_cart', id=product.id) }}" class="btn">Add to Cart</a>
        </div>
    </section>

    {% if related_products %}
    <section class="related-products">
        <h3>Related Products</h3>
        <div class="grid">
            {% for item in related_products %}
            <div class="product-card">
                <img src="{{ url_for('static', filename='images/' + (item.image or 'placeholder.jpg')) }}"
                     alt="{{ item.name }} image">
                <h3>{{ item.name }}</h3>
                <p class="price">Rs.{{ "%.2f"|format(item.price) }}</p>
                <a href="{{ url_for('product', id=item.id) }}" class="btn">View Product</a>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</main>
{% endblock %}
